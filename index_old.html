<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Profe Vale - RobÃ³tica Educativa</title>
  <link re    <!-- Asistente IA -->
    <div class="card-glass" style="max-width: 1000px; margin: 0 auto 3rem;">
      <h2 style="text-align: center; margin-bottom: 2rem;">ğŸ¤– Asistente IA de RobÃ³tica</h2>
      <p style="text-align: center; color: #e2e8f0; margin-bottom: 2rem;">
        Â¡Haceme cualquier pregunta sobre micro:bit, robÃ³tica educativa o estas aplicaciones!
      </p>
      
      <div style="max-width: 800px; margin: 0 auto;">
        <!-- Chat container -->
        <div id="chatContainer" style="background: rgba(26, 32, 44, 0.8); border-radius: 12px; border: 1px solid rgba(66, 153, 225, 0.2); height: 400px; overflow-y: auto; padding: 1rem; margin-bottom: 1rem; display: flex; flex-direction: column; gap: 0.75rem;">
          <div class="bot-message" style="align-self: flex-start; background: rgba(66, 153, 225, 0.15); padding: 0.75rem 1rem; border-radius: 12px 12px 12px 4px; max-width: 80%; border-left: 3px solid #4299e1;">
            <strong style="color: #4299e1;">ğŸ¤– Vale Bot:</strong><br>
            Â¡Hola! Soy tu asistente para robÃ³tica educativa. Puedo ayudarte con preguntas sobre micro:bit, programaciÃ³n en bloques, sensores, actuadores, y cÃ³mo usar las aplicaciones de este sitio. Â¿En quÃ© puedo ayudarte?
          </div>
        </div>
        
        <!-- Input area -->
        <div style="display: flex; gap: 0.75rem;">
          <input type="text" id="chatInput" placeholder="Preguntame sobre micro:bit, robÃ³tica, sensores..." 
                 style="flex: 1; padding: 0.875rem; border-radius: 8px; border: 1px solid rgba(66, 153, 225, 0.3); background: rgba(45, 55, 72, 0.8); color: #f7fafc; font-size: 1rem;"
                 maxlength="200">
          <button id="sendBtn" class="btn-neon" style="padding: 0.875rem 1.5rem; min-width: auto;">
            ğŸ“¤ Enviar
          </button>
        </div>
        
        <!-- Sugerencias -->
        <div style="margin-top: 1rem;">
          <p style="color: #cbd5e1; font-size: 0.9rem; margin-bottom: 0.5rem;">ğŸ’¡ Preguntas sugeridas:</p>
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            <button class="suggestion-btn" onclick="askSuggestion('Â¿CÃ³mo conecto mi micro:bit por Bluetooth?')" 
                    style="background: rgba(74, 85, 104, 0.6); color: #e2e8f0; border: 1px solid rgba(226, 232, 240, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.85rem; cursor: pointer;">
              ğŸ”— ConexiÃ³n Bluetooth
            </button>
            <button class="suggestion-btn" onclick="askSuggestion('Â¿QuÃ© sensores tiene la micro:bit?')"
                    style="background: rgba(74, 85, 104, 0.6); color: #e2e8f0; border: 1px solid rgba(226, 232, 240, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.85rem; cursor: pointer;">
              ğŸ“± Sensores micro:bit
            </button>
            <button class="suggestion-btn" onclick="askSuggestion('Â¿CÃ³mo hago un robot que siga una lÃ­nea?')"
                    style="background: rgba(74, 85, 104, 0.6); color: #e2e8f0; border: 1px solid rgba(226, 232, 240, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.85rem; cursor: pointer;">
              ğŸ¤– Robot seguidor
            </button>
            <button class="suggestion-btn" onclick="askSuggestion('Â¿CÃ³mo funciona el reconocimiento facial?')"
                    style="background: rgba(74, 85, 104, 0.6); color: #e2e8f0; border: 1px solid rgba(226, 232, 240, 0.2); border-radius: 20px; padding: 0.5rem 1rem; font-size: 0.85rem; cursor: pointer;">
              ğŸ‘ï¸ IA y cÃ¡mara
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Instrucciones de uso -->
    <div class="card-glass" style="max-width: 1000px; margin: 0 auto 3rem;">
      <h2 style="text-align: center; margin-bottom: 3rem;">ğŸ› ï¸ CÃ³mo Empezar</h2>stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="container">
    <!-- Header principal -->
    <div style="text-align: center; margin-bottom: 3rem;">
      <h1 class="header-glow">ğŸ¤– Profe Vale - RobÃ³tica Educativa</h1>
      <p style="font-size: 1.3rem; color: #00d2ff; text-shadow: 0 0 8px #00d2ff; margin-top: 1rem;">
        AprendÃ© robÃ³tica e IA con micro:bit de forma divertida
      </p>
    </div>

    <!-- SecciÃ³n de presentaciÃ³n -->
    <div class="card-glass" style="max-width: 900px; margin: 0 auto 2rem;">
      <div style="text-align: center; margin-bottom: 2rem;">
        <h2 style="color: #39ff14; text-shadow: 0 0 12px #39ff14;">Â¿QuÃ© es este proyecto?</h2>
      </div>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: center;">
        <div>
          <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 1rem;">
            Bienvenidos al mundo de la <strong style="color: #39ff14;">robÃ³tica educativa</strong> con 
            <strong style="color: #00d2ff;">Profe Vale</strong>. AcÃ¡ vas a encontrar herramientas digitales que conectan la 
            <strong style="color: #39ff14;">inteligencia artificial</strong> con la <strong style="color: #ff2e63;">micro:bit</strong> de manera simple y divertida.
          </p>
          <p style="line-height: 1.6;">
            Perfectas para <strong>estudiantes, docentes y makers</strong> que quieren experimentar con 
            <strong>reconocimiento facial</strong>, <strong>machine learning</strong> y <strong>control remoto</strong> usando solo el navegador.
          </p>
        </div>
        <div style="text-align: center;">
          <div class="panel-neon" style="padding: 1.5rem;">
            <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ¤–</div>
            <div style="color: #39ff14; font-weight: bold;">IA + RobÃ³tica</div>
            <div style="color: #00d2ff;">en tu navegador</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Apps disponibles -->
    <div class="card-glass" style="max-width: 1000px; margin: 0 auto 3rem;">
      <h2 style="text-align: center; margin-bottom: 3rem;">ğŸš€ Aplicaciones Disponibles</h2>
      
      <div class="grid-3">
        <!-- Teachable Machine App -->
        <div class="app-card">
          <div class="app-icon">ğŸ§ </div>
          <h3>Teachable Machine</h3>
          <p style="flex-grow: 1; margin-bottom: 1.5rem;">
            EntrenÃ¡ tu propio modelo de IA y que la micro:bit reaccione automÃ¡ticamente a objetos, gestos o poses que detecte la cÃ¡mara.
          </p>
          <div style="margin-top: auto; padding: 0 0.25rem;">
            <a class="btn-neon" href="AppMicrobitTeachable/index.html" style="width: calc(100% - 0.5rem); margin-bottom: 0.75rem; box-sizing: border-box;">ğŸ”¥ Usar App</a>
            <a class="btn-secondary" href="https://makecode.microbit.org/#pub:S82633-17924-93280-31710" target="_blank" style="width: calc(100% - 0.5rem); box-sizing: border-box;">ğŸ“ Ver cÃ³digo micro:bit</a>
          </div>
        </div>

        <!-- Face Recognition App -->
        <div class="app-card">
          <div class="app-icon">ğŸ¤–</div>
          <h3>Reconocimiento Facial</h3>
          <p style="flex-grow: 1; margin-bottom: 1.5rem;">
            DetectÃ¡ caras en tiempo real y enviÃ¡ 12 parÃ¡metros faciales detallados (posiciÃ³n, rotaciÃ³n, expresiones) a tu micro:bit.
          </p>
          <div style="margin-top: auto; padding: 0 0.25rem;">
            <a class="btn-neon" href="AppMicrobitRF/index.html" style="width: calc(100% - 0.5rem); margin-bottom: 0.75rem; box-sizing: border-box;">ğŸ”¥ Usar App</a>
            <a class="btn-secondary" href="https://makecode.microbit.org/#pub:S30471-65892-47813-52940" target="_blank" style="width: calc(100% - 0.5rem); box-sizing: border-box;">ğŸ“ Ver cÃ³digo micro:bit</a>
          </div>
        </div>

        <!-- Control Arrows App -->
        <div class="app-card">
          <div class="app-icon">ğŸ®</div>
          <h3>Control de Flechas</h3>
          <p style="flex-grow: 1; margin-bottom: 1.5rem;">
            ControlÃ¡ tu micro:bit con flechas direccionales personalizables. Ideal para robots, juegos y proyectos interactivos.
          </p>
          <div style="margin-top: auto; padding: 0 0.25rem;">
            <a class="btn-neon" href="AppMicrobitFlechas/index.html" style="width: calc(100% - 0.5rem); margin-bottom: 0.75rem; box-sizing: border-box;">ğŸ”¥ Usar App</a>
            <a class="btn-secondary" href="https://makecode.microbit.org/#pub:S12345-67890-12345-67890" target="_blank" style="width: calc(100% - 0.5rem); box-sizing: border-box;">ğŸ“ Ver cÃ³digo micro:bit</a>
          </div>
        </div>
      </div>
    </div>

    <!-- CaracterÃ­sticas tÃ©cnicas -->
    <div class="card-glass" style="max-width: 1000px; margin: 0 auto 3rem;">
      <h2 style="text-align: center; margin-bottom: 3rem;">âš¡ CaracterÃ­sticas TÃ©cnicas</h2>
      
      <div class="feature-grid">
        <div style="text-align: center;">
          <div style="color: #06b6d4; font-size: 2rem; margin-bottom: 1rem;">ğŸ“¡</div>
          <h3>Bluetooth Web API</h3>
          <p>ConexiÃ³n directa desde el navegador sin aplicaciones adicionales</p>
        </div>
        
        <div style="text-align: center;">
          <div style="color: #06b6d4; font-size: 2rem; margin-bottom: 1rem;">ğŸ¯</div>
          <h3>TensorFlow.js</h3>
          <p>Inteligencia artificial ejecutÃ¡ndose localmente en tu dispositivo</p>
        </div>
        
        <div style="text-align: center;">
          <div style="color: #06b6d4; font-size: 2rem; margin-bottom: 1rem;">ğŸ“±</div>
          <h3>Multiplataforma</h3>
          <p>Compatible con smartphones, tablets y computadoras</p>
        </div>
        
        <div style="text-align: center;">
          <div style="color: #06b6d4; font-size: 2rem; margin-bottom: 1rem;">ğŸš€</div>
          <h3>Tiempo Real</h3>
          <p>Procesamiento optimizado a 60fps para mÃ¡xima fluidez</p>
        </div>
      </div>
    </div>



    <!-- Instrucciones de uso -->
    <div class="card-glass" style="max-width: 900px; margin: 0 auto 2rem;">
      <h2 style="text-align: center; margin-bottom: 2rem;">ğŸ› ï¸ CÃ³mo Empezar</h2>
      
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center; padding: 1rem;">
          <div class="feedback-pulse" style="background: rgba(57,255,20,0.1); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem;">1ï¸âƒ£</div>
          <h3 style="color: #39ff14; margin-bottom: 0.5rem;">Preparar micro:bit</h3>
          <p style="font-size: 0.9rem;">CargÃ¡ el cÃ³digo Bluetooth en tu micro:bit usando MakeCode</p>
        </div>
        
        <div style="text-align: center; padding: 1rem;">
          <div class="feedback-pulse" style="background: rgba(0,210,255,0.1); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem;">2ï¸âƒ£</div>
          <h3 style="color: #00d2ff; margin-bottom: 0.5rem;">Abrir App Web</h3>
          <p style="font-size: 0.9rem;">UsÃ¡ Chrome o Edge para mejor compatibilidad con Bluetooth</p>
        </div>
        
        <div style="text-align: center; padding: 1rem;">
          <div class="feedback-pulse" style="background: rgba(255,46,99,0.1); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem;">3ï¸âƒ£</div>
          <h3 style="color: #ff2e63; margin-bottom: 0.5rem;">Conectar y Experimentar</h3>
          <p style="font-size: 0.9rem;">ConectÃ¡ por Bluetooth y empezÃ¡ a crear proyectos increÃ­bles</p>
        </div>
      </div>
    </div>

    <!-- Formulario de contacto -->
    <div class="card-glass" style="max-width: 800px; margin: 0 auto 3rem;">
      <h2 style="text-align: center; margin-bottom: 2rem;">ğŸ“¬ Â¿TenÃ©s alguna consulta?</h2>
      <p style="text-align: center; color: #cbd5e1; margin-bottom: 2rem;">
        Enviame tus preguntas, sugerencias o compartÃ­ cÃ³mo usÃ¡s estas herramientas en tus proyectos
      </p>
      
      <form id="contactForm" action="https://formspree.io/f/xyznwavn" method="POST" style="max-width: 600px; margin: 0 auto;">
        <div class="grid-2" style="margin-bottom: 1.5rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #4299e1; font-weight: 500;">Nombre *</label>
            <input type="text" name="nombre" required 
                   style="width: 100%; padding: 0.875rem; border-radius: 8px; border: 1px solid rgba(66, 153, 225, 0.3); background: rgba(45, 55, 72, 0.8); color: #f7fafc; font-size: 1rem;"
                   placeholder="Tu nombre">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #4299e1; font-weight: 500;">Email *</label>
            <input type="email" name="email" required 
                   style="width: 100%; padding: 0.875rem; border-radius: 8px; border: 1px solid rgba(66, 153, 225, 0.3); background: rgba(45, 55, 72, 0.8); color: #f7fafc; font-size: 1rem;"
                   placeholder="tu@email.com">
          </div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #4299e1; font-weight: 500;">Asunto</label>
          <select name="asunto" 
                  style="width: 100%; padding: 0.875rem; border-radius: 8px; border: 1px solid rgba(66, 153, 225, 0.3); background: rgba(45, 55, 72, 0.8); color: #f7fafc; font-size: 1rem;">
            <option value="consulta">Consulta general</option>
            <option value="bug">Reportar problema</option>
            <option value="sugerencia">Sugerencia de mejora</option>
            <option value="colaboracion">Propuesta de colaboraciÃ³n</option>
            <option value="educativo">Uso educativo</option>
          </select>
        </div>
        
        <div style="margin-bottom: 2rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #4299e1; font-weight: 500;">Mensaje *</label>
          <textarea name="mensaje" required rows="5"
                    style="width: 100%; padding: 0.875rem; border-radius: 8px; border: 1px solid rgba(66, 153, 225, 0.3); background: rgba(45, 55, 72, 0.8); color: #f7fafc; font-size: 1rem; resize: vertical;"
                    placeholder="Contame tu consulta, experiencia o sugerencia..."></textarea>
        </div>
        
        <div style="text-align: center;">
          <button type="submit" class="btn-neon" style="min-width: 200px;">
            ğŸ“¤ Enviar Mensaje
          </button>
        </div>
        
        <div id="formStatus" style="margin-top: 1rem; text-align: center; font-weight: 500;"></div>
      </form>
    </div>

    <!-- Footer con info adicional -->
    <div class="card-glass" style="max-width: 1000px; margin: 0 auto; text-align: center;">
      <h2 style="margin-bottom: 2rem;">ğŸ’¡ Ideal Para</h2>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 3rem; margin-bottom: 2rem;">
        <div style="color: #22c55e; display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.5rem;">ğŸ“š</span>
          <strong>EducaciÃ³n</strong>
        </div>
        <div style="color: #06b6d4; display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.5rem;">ğŸ”¬</span>
          <strong>Experimentos</strong>
        </div>
        <div style="color: #f59e0b; display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.5rem;">ğŸ¤–</span>
          <strong>RobÃ³tica</strong>
        </div>
        <div style="color: #ec4899; display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.5rem;">ğŸ¨</span>
          <strong>Proyectos Creativivos</strong>
        </div>
      </div>
      <div style="height: 1px; background: linear-gradient(to right, transparent, rgba(6, 182, 212, 0.3), transparent); margin: 2rem 0;"></div>
      <p style="color: #94a3b8; font-size: 1rem;">
        Desarrollado con â¤ï¸ por <strong class="text-gradient">Profe Vale</strong> para la comunidad educativa y maker
      </p>
    </div>
  </div>

  <script>
    // Formulario de contacto con Formspree
    document.getElementById('contactForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const formStatus = document.getElementById('formStatus');
      const submitBtn = e.target.querySelector('button[type="submit"]');
      
      // Mostrar estado de envÃ­o
      formStatus.style.color = '#4299e1';
      formStatus.textContent = 'Enviando mensaje...';
      submitBtn.disabled = true;
      submitBtn.textContent = 'ğŸ“¤ Enviando...';
      
      try {
        // Enviar a Formspree
        const formData = new FormData(e.target);
        const response = await fetch(e.target.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          // Ã‰xito
          formStatus.style.color = '#68d391';
          formStatus.innerHTML = 'âœ… Â¡Mensaje enviado con Ã©xito! Te responderÃ© pronto.';
          e.target.reset();
        } else {
          // Error del servidor
          formStatus.style.color = '#fc8181';
          formStatus.textContent = 'âŒ Error del servidor. IntentÃ¡ de nuevo mÃ¡s tarde.';
        }
        
      } catch (error) {
        // Error de red
        formStatus.style.color = '#fc8181';
        formStatus.textContent = 'âŒ Error de conexiÃ³n. VerificÃ¡ tu internet e intentÃ¡ de nuevo.';
        console.error('Error enviando formulario:', error);
      } finally {
        // Restaurar botÃ³n
        submitBtn.disabled = false;
        submitBtn.textContent = 'ğŸ“¤ Enviar Mensaje';
        
        // Limpiar estado despuÃ©s de 5 segundos
        setTimeout(() => {
          formStatus.textContent = '';
        }, 5000);
      }
    });

    // Mejorar UX del formulario
    const inputs = document.querySelectorAll('input, textarea, select');
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.style.borderColor = 'rgba(66, 153, 225, 0.6)';
        this.style.boxShadow = '0 0 0 3px rgba(66, 153, 225, 0.15)';
      });
      
      input.addEventListener('blur', function() {
        this.style.borderColor = 'rgba(66, 153, 225, 0.3)';
        this.style.boxShadow = 'none';
      });
    });

    // Animaciones suaves al scroll
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);

    // Aplicar animaciones a las cards
    document.querySelectorAll('.card-glass, .app-card').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(card);
    });

    // Chatbot IA
    const chatContainer = document.getElementById('chatContainer');
    const chatInput = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    
    // Base de conocimiento sobre robÃ³tica educativa y micro:bit
    const knowledge = {
      "micro:bit": {
        "sensores": "La micro:bit v2 tiene: acelerÃ³metro, brÃºjula, sensor de temperatura, micrÃ³fono, sensor de luz, 2 botones, 25 LEDs, y conexiÃ³n por radio y Bluetooth.",
        "bluetooth": "Para conectar por Bluetooth: 1) CargÃ¡ cÃ³digo con 'bluetooth.startUartService()' 2) Desde Chrome, usÃ¡ Web Bluetooth API 3) EmparejÃ¡ con 'BBC micro:bit'",
        "programacion": "PodÃ©s programar la micro:bit con MakeCode (bloques o JavaScript), Python, o C++. MakeCode es ideal para comenzar.",
        "pines": "La micro:bit tiene 25 pines: 0,1,2 son analÃ³gicos/digitales, el resto son digitales. PodÃ©s conectar LEDs, servos, sensores, etc."
      },
      "robotica": {
        "seguidor_linea": "Robot seguidor: UsÃ¡ 2 sensores de luz a los costados, si uno detecta la lÃ­nea negra, girÃ¡ hacia ese lado para mantenerse centrado.",
        "servo": "Los servos se controlan con PWM. En MakeCode: pins.servoWritePin(). ConectÃ¡: rojo=3V, negro=GND, amarillo=pin digital.",
        "motor": "Para motores DC usÃ¡ un driver como L298N. La micro:bit no puede manejar motores grandes directamente por la corriente.",
        "sensores": "Sensores comunes: ultrasÃ³nico (distancia), LDR (luz), PIR (movimiento), DHT22 (temperatura/humedad), potenciÃ³metro (rotaciÃ³n)."
      },
      "apps": {
        "teachable": "Teachable Machine: 1) EntrenÃ¡s un modelo en teachablemachine.withgoogle.com 2) CopiÃ¡s el link 3) La app detecta y envÃ­a la clase a micro:bit",
        "facial": "Reconocimiento facial: Detecta cara y calcula 12 parÃ¡metros (posiciÃ³n, rotaciÃ³n, expresiones). Ideal para robots que reaccionen a emociones.",
        "flechas": "Control de flechas: EnvÃ­a comandos U/D/L/R personalizables. Perfecto para robots mÃ³viles o juegos direccionales.",
        "bluetooth_web": "Las apps usan Web Bluetooth API, solo funcionan en Chrome/Edge. No necesitÃ¡s instalar nada, se conecta directo desde el navegador."
      },
      "proyectos": {
        "mascota": "Mascota virtual: UsÃ¡ los botones para 'alimentar', el acelerÃ³metro para detectar movimiento, y la matriz de LEDs para mostrar emociones.",
        "alarma": "Sistema de alarma: Sensor PIR detecta movimiento, buzzer suena, LED parpadea, y enviÃ¡s notificaciÃ³n por Bluetooth.",
        "weather": "EstaciÃ³n meteorolÃ³gica: Sensor temperatura/humedad + micro:bit para mostrar datos y enviar a app web por Bluetooth.",
        "juegos": "Juegos: Snake (con acelerÃ³metro), Piedra/Papel/Tijera (con botones), Dado digital (con agitar), Simon Says (LEDs y botones)."
      }
    };

    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = isUser ? 'user-message' : 'bot-message';
      
      if (isUser) {
        messageDiv.style.cssText = 'align-self: flex-end; background: rgba(104, 211, 145, 0.15); padding: 0.75rem 1rem; border-radius: 12px 12px 4px 12px; max-width: 80%; border-right: 3px solid #68d391;';
        messageDiv.innerHTML = `<strong style="color: #68d391;">ğŸ‘¤ TÃº:</strong><br>${text}`;
      } else {
        messageDiv.style.cssText = 'align-self: flex-start; background: rgba(66, 153, 225, 0.15); padding: 0.75rem 1rem; border-radius: 12px 12px 12px 4px; max-width: 80%; border-left: 3px solid #4299e1;';
        messageDiv.innerHTML = `<strong style="color: #4299e1;">ğŸ¤– Vale Bot:</strong><br>${text}`;
      }
      
      chatContainer.appendChild(messageDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function getBotResponse(question) {
      const q = question.toLowerCase();
      
      // Respuestas especÃ­ficas segÃºn palabras clave
      if (q.includes('bluetooth') || q.includes('conectar')) {
        return knowledge["micro:bit"]["bluetooth"] + "<br><br>ğŸ’¡ <strong>Tip:</strong> En las apps de este sitio, solo hacÃ© click en 'Conectar micro:bit' y seleccionÃ¡ tu dispositivo.";
      }
      
      if (q.includes('sensor') && q.includes('micro:bit')) {
        return knowledge["micro:bit"]["sensores"] + "<br><br>ğŸ”§ <strong>Uso:</strong> En MakeCode encontrÃ¡s todos estos sensores en la categorÃ­a 'Entrada'.";
      }
      
      if (q.includes('seguidor') && q.includes('linea')) {
        return knowledge.robotica["seguidor_linea"] + "<br><br>ğŸ“ <strong>CÃ³digo:</strong> UsÃ¡ 'pins.analogReadPin()' para leer los sensores y 'pins.servoWritePin()' para los motores.";
      }
      
      if (q.includes('servo')) {
        return knowledge.robotica["servo"] + "<br><br>âš¡ <strong>AtenciÃ³n:</strong> Los servos consumen mÃ¡s corriente, considerÃ¡ una fuente externa para mÃºltiples servos.";
      }
      
      if (q.includes('teachable') || q.includes('ia') || q.includes('inteligencia')) {
        return knowledge.apps["teachable"] + "<br><br>ğŸ¯ <strong>Ideas:</strong> ClasificÃ¡ objetos, gestos, poses, o cualquier cosa que puedas mostrar a la cÃ¡mara.";
      }
      
      if (q.includes('facial') || q.includes('cara')) {
        return knowledge.apps["facial"] + "<br><br>ğŸ˜Š <strong>ParÃ¡metros:</strong> X, Y (posiciÃ³n), Z (distancia), rotaciÃ³n, apertura de ojos, sonrisa, etc.";
      }
      
      if (q.includes('flecha') || q.includes('control') || q.includes('direccion')) {
        return knowledge.apps["flechas"] + "<br><br>ğŸ® <strong>Personalizable:</strong> PodÃ©s cambiar U/D/L/R por palabras completas o nÃºmeros.";
      }
      
      if (q.includes('motor')) {
        return knowledge.robotica["motor"] + "<br><br>ğŸ”Œ <strong>Importante:</strong> Siempre conectÃ¡ la tierra (GND) comÃºn entre micro:bit y driver de motor.";
      }
      
      if (q.includes('pin') || q.includes('conexion')) {
        return knowledge["micro:bit"]["pines"] + "<br><br>ğŸ“Š <strong>Voltajes:</strong> Pines digitales: 0V (LOW) o 3.3V (HIGH). AnalÃ³gicos: 0-1023 (0V-3.3V).";
      }
      
      if (q.includes('mascota') || q.includes('virtual')) {
        return knowledge.proyectos["mascota"] + "<br><br>ğŸ˜º <strong>ExpansiÃ³n:</strong> AgregÃ¡ sonidos con un buzzer y conectividad con la app de reconocimiento facial.";
      }
      
      if (q.includes('alarma')) {
        return knowledge.proyectos["alarma"] + "<br><br>ğŸš¨ <strong>Mejora:</strong> Combinalo con la app de flechas para desactivar remotamente.";
      }
      
      if (q.includes('juego') || q.includes('snake') || q.includes('simon')) {
        return knowledge.proyectos["juegos"] + "<br><br>ğŸ•¹ï¸ <strong>Tip:</strong> CombinÃ¡ con las apps web para controles mÃ¡s avanzados.";
      }
      
      if (q.includes('web') || q.includes('navegador')) {
        return knowledge.apps["bluetooth_web"] + "<br><br>ğŸŒ <strong>Ventaja:</strong> No necesitÃ¡s instalar apps, funciona directo desde cualquier dispositivo con Chrome.";
      }
      
      if (q.includes('programa') || q.includes('codigo') || q.includes('makecode')) {
        return knowledge["micro:bit"]["programacion"] + "<br><br>ğŸ“ <strong>Recurso:</strong> microbit.org tiene tutoriales excelentes para empezar.";
      }
      
      if (q.includes('clima') || q.includes('weather') || q.includes('temperatura')) {
        return knowledge.proyectos["weather"] + "<br><br>ğŸ“± <strong>App:</strong> UsÃ¡ la app de reconocimiento facial para mostrar datos cuando detecte una cara.";
      }
      
      // Respuestas generales
      if (q.includes('hola') || q.includes('help') || q.includes('ayuda')) {
        return "Â¡Hola! Estoy acÃ¡ para ayudarte con micro:bit y robÃ³tica educativa. Puedo explicarte sobre sensores, programaciÃ³n, proyectos, y cÃ³mo usar las apps de este sitio. Â¿QuÃ© te interesa aprender? ğŸ¤–";
      }
      
      if (q.includes('gracias') || q.includes('thanks')) {
        return "Â¡De nada! Me encanta ayudar con proyectos de robÃ³tica. Si tenÃ©s mÃ¡s preguntas sobre micro:bit, sensores, o cualquier proyecto, preguntame sin dudas. Â¡A seguir creando! ğŸš€";
      }
      
      // Respuesta por defecto
      return "Interesante pregunta ğŸ¤” Mi especialidad es micro:bit, robÃ³tica educativa, sensores, programaciÃ³n en bloques, y las aplicaciones de este sitio.<br><br>PodÃ©s preguntarme sobre:<br>â€¢ ConexiÃ³n Bluetooth y sensores de micro:bit<br>â€¢ Proyectos con servos y motores<br>â€¢ CÃ³mo usar las apps de Teachable Machine, reconocimiento facial y control de flechas<br>â€¢ Ideas de proyectos educativos<br><br>Â¡ReformulÃ¡ tu pregunta y te ayudo! ğŸ˜Š";
    }

    function sendMessage() {
      const message = chatInput.value.trim();
      if (!message) return;
      
      addMessage(message, true);
      chatInput.value = '';
      sendBtn.disabled = true;
      sendBtn.textContent = 'â³';
      
      // Simular tiempo de procesamiento
      setTimeout(() => {
        const response = getBotResponse(message);
        addMessage(response);
        sendBtn.disabled = false;
        sendBtn.textContent = 'ğŸ“¤ Enviar';
        chatInput.focus();
      }, Math.random() * 1000 + 500); // 0.5-1.5 segundos
    }

    function askSuggestion(question) {
      chatInput.value = question;
      sendMessage();
    }

    // Event listeners para el chat
    sendBtn.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    // Estilo hover para sugerencias
    document.querySelectorAll('.suggestion-btn').forEach(btn => {
      btn.addEventListener('mouseenter', function() {
        this.style.background = 'rgba(113, 128, 150, 0.8)';
        this.style.borderColor = 'rgba(226, 232, 240, 0.4)';
      });
      btn.addEventListener('mouseleave', function() {
        this.style.background = 'rgba(74, 85, 104, 0.6)';
        this.style.borderColor = 'rgba(226, 232, 240, 0.2)';
      });
    });
  </script>
</body>
</html>