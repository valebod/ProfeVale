<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vale Bot - Asistente IA de Rob√≥tica</title>
  <link rel="stylesheet" href="../style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="container">
    <!-- Header -->
        <!-- Header -->
    <div style="text-align: center; margin-bottom: 2rem;">
      <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
        <img src="../LogoProfeVale.png" alt="Profe Vale Logo" style="width: 80px; height: 80px;">
        <div>
          <h1 class="header-glow" style="margin: 0;">Profe Vale</h1>
          <p style="margin: 0; color: #e6f3ff;">ü§ñ Vale Bot - Asistente IA</p>
        </div>
      </div>
      <a href="../index.html" class="btn-neon" style="display: inline-block; margin-top: 1rem;">‚Üê Volver al inicio</a>
    </div>

    <!-- Chatbot -->
    <div class="ai-container" style="max-width: 900px; margin: 0 auto;">
      <div style="max-width: 100%; margin: 0 auto;">
        <!-- Chat container -->
        <div id="chatContainer" class="chat-container">
          <div class="bot-message">
            <span class="message-label bot-label">Vale Bot</span>
            ¬°Hola! Soy tu asistente para rob√≥tica educativa. Puedo ayudarte con preguntas sobre micro:bit, programaci√≥n en bloques, sensores, actuadores, y c√≥mo usar las aplicaciones de este sitio. ¬øEn qu√© puedo ayudarte?
          </div>
        </div>
        
        <!-- Suggestions -->
        <div class="suggestions-container">
          <button onclick="askSuggestion('¬øC√≥mo conecto la micro:bit por Bluetooth?')" class="suggestion-btn">Bluetooth</button>
          <button onclick="askSuggestion('¬øQu√© sensores tiene la micro:bit?')" class="suggestion-btn">Sensores</button>
          <button onclick="askSuggestion('¬øC√≥mo funciona Teachable Machine?')" class="suggestion-btn">IA</button>
          <button onclick="askSuggestion('Dame ideas de proyectos con micro:bit')" class="suggestion-btn">Proyectos</button>
        </div>
        
        <!-- Input area -->
        <div class="input-container">
          <input type="text" id="chatInput" placeholder="Preguntame sobre micro:bit, rob√≥tica, sensores..." 
                 class="chat-input" maxlength="200">
          <button id="sendBtn" class="send-btn">
            Enviar
          </button>
        </div>
      </div>
    </div>

    <!-- Tips de uso -->
    <div class="card-glass" style="max-width: 900px; margin: 2rem auto;">
      <h3 style="color: #68d391; margin-bottom: 1rem;">üí° Tips para usar Vale Bot:</h3>
      <ul style="list-style: none; padding: 0;">
        <li style="margin-bottom: 0.5rem;">‚úÖ Pregunt√° sobre sensores, programaci√≥n, conexi√≥n Bluetooth</li>
        <li style="margin-bottom: 0.5rem;">‚úÖ Ped√≠ ideas para proyectos educativos</li>
        <li style="margin-bottom: 0.5rem;">‚úÖ Consult√° sobre el uso de las aplicaciones del sitio</li>
        <li style="margin-bottom: 0.5rem;">‚úÖ Solicit√° ayuda con rob√≥tica y micro:bit</li>
      </ul>
    </div>
  </div>

  <script>
    // Base de conocimiento sobre rob√≥tica educativa y micro:bit
    const knowledge = {
      "micro:bit": {
        "sensores": "La micro:bit v2 tiene: aceler√≥metro, br√∫jula, sensor de temperatura, micr√≥fono, sensor de luz, 2 botones, 25 LEDs, y conexi√≥n por radio y Bluetooth.",
        "bluetooth": "Para conectar por Bluetooth: 1) Carg√° c√≥digo con 'bluetooth.startUartService()' 2) Desde Chrome, us√° Web Bluetooth API 3) Emparej√° con 'BBC micro:bit'",
        "programacion": "Pod√©s programar la micro:bit con MakeCode (bloques o JavaScript), Python, o C++. MakeCode es ideal para comenzar.",
        "pines": "La micro:bit tiene 25 pines: 0,1,2 son anal√≥gicos/digitales, el resto son digitales. Pod√©s conectar LEDs, servos, sensores, etc."
      },
      "robotica": {
        "seguidor_linea": "Robot seguidor: Us√° 2 sensores de luz a los costados, si uno detecta la l√≠nea negra, gir√° hacia ese lado para mantenerse centrado.",
        "servo": "Los servos se controlan con PWM. En MakeCode: pins.servoWritePin(). Conect√°: rojo=3V, negro=GND, amarillo=pin digital.",
        "motor": "Para motores DC us√° un driver como L298N. La micro:bit no puede manejar motores grandes directamente por la corriente.",
        "sensores": "Sensores comunes: ultras√≥nico (distancia), LDR (luz), PIR (movimiento), DHT22 (temperatura/humedad), potenci√≥metro (rotaci√≥n)."
      },
      "apps": {
        "teachable": "Teachable Machine: 1) Entren√°s un modelo en teachablemachine.withgoogle.com 2) Copi√°s el link 3) La app detecta y env√≠a la clase a micro:bit",
        "facial": "Reconocimiento facial: Detecta cara y calcula 12 par√°metros (posici√≥n, rotaci√≥n, expresiones). Ideal para robots que reaccionen a emociones.",
        "remoto": "Control remoto por Bluetooth: Env√≠a comandos U/D/L/R personalizables. Perfecto para robots m√≥viles o juegos direccionales.",
        "bluetooth_web": "Las apps usan Web Bluetooth API, solo funcionan en Chrome/Edge. No necesit√°s instalar nada, se conecta directo desde el navegador."
      },
      "proyectos": {
        "mascota": "Mascota virtual: Us√° los botones para 'alimentar', el aceler√≥metro para detectar movimiento, y la matriz de LEDs para mostrar emociones.",
        "alarma": "Sistema de alarma: Sensor PIR detecta movimiento, buzzer suena, LED parpadea, y envi√°s notificaci√≥n por Bluetooth.",
        "weather": "Estaci√≥n meteorol√≥gica: Sensor temperatura/humedad + micro:bit para mostrar datos y enviar a app web por Bluetooth.",
        "juegos": "Juegos: Snake (con aceler√≥metro), Piedra/Papel/Tijera (con botones), Dado digital (con agitar), Simon Says (LEDs y botones)."
      }
    };

    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = isUser ? 'user-message' : 'bot-message';
      
      if (isUser) {
        messageDiv.innerHTML = `<span class="message-label user-label">T√∫:</span><br>${text}`;
      } else {
        messageDiv.innerHTML = `<span class="message-label bot-label">ü§ñ Vale Bot:</span><br><br>${text}`;
      }
      
      const chatContainer = document.getElementById('chatContainer');
      chatContainer.appendChild(messageDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function getBotResponse(question) {
      const q = question.toLowerCase();
      
      // Respuestas espec√≠ficas seg√∫n palabras clave
      if (q.includes('bluetooth') || q.includes('conectar')) {
        return knowledge["micro:bit"]["bluetooth"] + "<br><br><strong>Tip:</strong> En las apps de este sitio, solo hac√© click en 'Conectar micro:bit' y seleccion√° tu dispositivo.";
      }
      
      if (q.includes('sensor') && q.includes('micro:bit')) {
        return knowledge["micro:bit"]["sensores"] + "<br><br><strong>Uso:</strong> En MakeCode encontr√°s todos estos sensores en la categor√≠a 'Entrada'.";
      }
      
      if (q.includes('seguidor') && q.includes('linea')) {
        return knowledge.robotica["seguidor_linea"] + "<br><br><strong>C√≥digo:</strong> Us√° 'pins.analogReadPin()' para leer los sensores y 'pins.servoWritePin()' para los motores.";
      }
      
      if (q.includes('servo')) {
        return knowledge.robotica["servo"] + "<br><br><strong>Atenci√≥n:</strong> Los servos consumen m√°s corriente, consider√° una fuente externa para m√∫ltiples servos.";
      }
      
      if (q.includes('teachable') || q.includes('ia') || q.includes('inteligencia')) {
        return knowledge.apps["teachable"] + "<br><br><strong>Ideas:</strong> Clasific√° objetos, gestos, poses, o cualquier cosa que puedas mostrar a la c√°mara.";
      }
      
      if (q.includes('facial') || q.includes('cara')) {
        return knowledge.apps["facial"] + "<br><br><strong>Par√°metros:</strong> X, Y (posici√≥n), Z (distancia), rotaci√≥n, apertura de ojos, sonrisa, etc.";
      }
      
      if (q.includes('flecha') || q.includes('control') || q.includes('direccion')) {
        return knowledge.apps["flechas"] + "<br><br><strong>Personalizable:</strong> Pod√©s cambiar U/D/L/R por palabras completas o n√∫meros.";
      }
      
      if (q.includes('motor')) {
        return knowledge.robotica["motor"] + "<br><br><strong>Importante:</strong> Siempre conect√° la tierra (GND) com√∫n entre micro:bit y driver de motor.";
      }
      
      if (q.includes('pin') || q.includes('conexion')) {
        return knowledge["micro:bit"]["pines"] + "<br><br><strong>Voltajes:</strong> Pines digitales: 0V (LOW) o 3.3V (HIGH). Anal√≥gicos: 0-1023 (0V-3.3V).";
      }
      
      if (q.includes('mascota') || q.includes('virtual')) {
        return knowledge.proyectos["mascota"] + "<br><br><strong>Expansi√≥n:</strong> Agreg√° sonidos con un buzzer y conectividad con la app de reconocimiento facial.";
      }
      
      if (q.includes('alarma')) {
        return knowledge.proyectos["alarma"] + "<br><br><strong>Mejora:</strong> Combinalo con la app de flechas para desactivar remotamente.";
      }
      
      if (q.includes('juego') || q.includes('snake') || q.includes('simon')) {
        return knowledge.proyectos["juegos"] + "<br><br><strong>Tip:</strong> Combin√° con las apps web para controles m√°s avanzados.";
      }
      
      if (q.includes('web') || q.includes('navegador')) {
        return knowledge.apps["bluetooth_web"] + "<br><br><strong>Ventaja:</strong> No necesit√°s instalar apps, funciona directo desde cualquier dispositivo con Chrome.";
      }
      
      if (q.includes('programa') || q.includes('codigo') || q.includes('makecode')) {
        return knowledge["micro:bit"]["programacion"] + "<br><br><strong>Recurso:</strong> microbit.org tiene tutoriales excelentes para empezar.";
      }
      
      if (q.includes('clima') || q.includes('weather') || q.includes('temperatura')) {
        return knowledge.proyectos["weather"] + "<br><br><strong>App:</strong> Us√° la app de reconocimiento facial para mostrar datos cuando detecte una cara.";
      }
      
      // Respuestas generales
      if (q.includes('hola') || q.includes('help') || q.includes('ayuda')) {
        return "¬°Hola! Estoy ac√° para ayudarte con micro:bit y rob√≥tica educativa. Puedo explicarte sobre sensores, programaci√≥n, proyectos, y c√≥mo usar las apps de este sitio. ¬øQu√© te interesa aprender?";
      }
      
      if (q.includes('gracias') || q.includes('thanks')) {
        return "¬°De nada! Me encanta ayudar con proyectos de rob√≥tica. Si ten√©s m√°s preguntas sobre micro:bit, sensores, o cualquier proyecto, preguntame sin dudas. ¬°A seguir creando!";
      }
      
      // Respuestas aleatorias mejoradas
      const responses = [
        'ü§î ¬°Interesante! Soy especialista en micro:bit y rob√≥tica educativa. ¬øTe interesa alg√∫n proyecto espec√≠fico?',
        'üöÄ Mi fuerte son los proyectos con micro:bit. ¬øQuer√©s que te ayude con sensores, programaci√≥n o conexiones?',
        'ü§ñ Hablemos de rob√≥tica! ¬øEst√°s empezando o ya ten√©s experiencia con micro:bit?',
        'üí° ¬°Me gusta tu curiosidad! ¬øTe interesa m√°s la parte de programaci√≥n, sensores o proyectos creativos?'
      ];
      
      const randomResponse = responses[Math.floor(Math.random() * responses.length)];
      
      return `${randomResponse}<br><br>üí¨ <strong>Pod√©s preguntarme sobre:</strong><br>‚Ä¢ Conexi√≥n Bluetooth y configuraci√≥n<br>‚Ä¢ Sensores (temperatura, aceler√≥metro, luz)<br>‚Ä¢ Proyectos con motores y servos<br>‚Ä¢ IA y Teachable Machine<br>‚Ä¢ Ideas y soluci√≥n de problemas<br>‚Ä¢ Mis clases y formaci√≥n disponible`;
    }

    function sendMessage() {
      const chatInput = document.getElementById('chatInput');
      const sendBtn = document.getElementById('sendBtn');
      const message = chatInput.value.trim();
      if (!message) return;
      
      addMessage(message, true);
      chatInput.value = '';
      sendBtn.disabled = true;
      sendBtn.textContent = 'Procesando...';
      
      // Simular tiempo de procesamiento
      setTimeout(() => {
        const response = getBotResponse(message);
        addMessage(response);
        sendBtn.disabled = false;
        sendBtn.textContent = 'Enviar';
        chatInput.focus();
      }, Math.random() * 1000 + 500);
    }

    function askSuggestion(question) {
      document.getElementById('chatInput').value = question;
      sendMessage();
    }

    // Event listeners para el chat
    document.getElementById('sendBtn').addEventListener('click', sendMessage);
    document.getElementById('chatInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
  
  <!-- Volver al Inicio -->
  <div style="text-align: center; margin: 3rem 0;">
    <a href="../index.html" class="btn-neon" style="font-size: 1rem; padding: 1rem 2rem;">
      üè† Volver al Inicio
    </a>
  </div>

</body>
</html>